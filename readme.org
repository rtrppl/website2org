#+title: website2org.el

#+BEGIN_HTML
<img src="/website2org.gif" alt="website2org in action">
#+END_HTML


*website2org.el* downloads a website, transforms it into minimalist Orgmode, and presents the results into either a temporary Orgmode buffer or creates a .org file in a specified directory.

I have two primary uses cases for this. 1) Local storage/read it later: I often store websites locally to link them (and specific paragraphs) to my Zettelkasten in [[https://github.com/rtrppl/orgrr][orgrr]]. (They are downloaded to the directory "findings", an orgrr container, and the tag "orgrr-project" is automatically added. See orgrr for details.) 2) To quickly see the contents of a website in [[https://codeberg.org/martianh/mastodon.el][mastodon.el]]. 

This package is still in a very early stage. I use it to replace =orgrr-save-website=, which draws on =org-web-tools--eww-readable= and =org-web-tools--html-to-org-with-pandoc= but has become more fragile by the day. =orgrr-save-website= also often does struggle to produce the kind of Orgmode I want to have - with as little HTML fragments as possible. 

website2org requires [[https://www.gnu.org/software/wget/][wget]] but does not use [[https://pandoc.org/][Pandoc]]. The package parses HTML to achieve rather minimal looking Orgmode files, see below.

** Minimal Orgmode

website2org ignores all information before the first =<h1>= headline and everything coming after the =<footer>=. All data about images, source, =<div>= and similar types of tags are also ignored. It respects all paragraphs, headlines, lists, block quotes, =<pre>= (line breaks are still an issue here), links, =<strong>=, and =<em>=. Tabs and multiple spaces are reduced to one space. A new line cannot start with a space (or "- " followed by nothing).

** Change log

*0.1*
- first public version

** Installation

Clone the repository:

=git clone https://github.com/rtrppl/website2org=

To run Website2org, you need to load the package by adding it to your .emacs or init.el:

#+begin_src elisp
(load "/path/to/website2org/website2org.el") 
#+end_src

You should set a binding to =website2org= and =website2org-temp=. 

#+begin_src elisp
(global-set-key (kbd "C-M-s-<down>") 'website2org) ;; this is what I use on a Mac
(global-set-key (kbd "C-M-s-<up>") 'website2org-temp)
#+end_src

Or, if you use straight:

#+begin_src elisp
(use-package website2org
  :straight (:host github :repo "rtrppl/website2org")
  :bind
  (:map global-map)
  ("C-M-s-<down>" . website2org)
  ("C-M-s-<up>" . website2org-temp))
#+end_src

Additionally you can set these values:

#+begin_src elisp
;; If wget should be called with a differnt command.
(setq website2org-wget-cmd "wget -q -O ") 
;; Change the name of the local cache file.
(setq website2org-cache-filename "~/website2org-cache.html") 
;; Turn website2org-additional-meta nil if not applicable. This is for
;; use in orgrr (https://github.com/rtrppl/orgrr).
(setq website2org-additional-meta "#+roam_tags: website orgrr-project") 

(defvar website2org-filename-time-format "%Y%m%d%H%M%S")
#+end_src


** Functions

These are the primary functions of website2org.el:

=website2org= will download the website at point (or from a provided URL) and save it as a Orgmode file. =website2org-temp= will download a website at point (or from a provided URL) and present it as a temporary Orgmode buffer.

